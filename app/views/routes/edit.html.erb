<div class="max-w-3xl mx-auto px-4 py-8 space-y-8">
  <h1 class="text-2xl font-bold text-gray-800 mb-4">ルートを編集</h1>

  <%= form_with(model: @route, local: true, html: { multipart: true, class: "space-y-6" }) do |f| %>
    <div>
      <%= f.label :title, "タイトル", class: "block font-semibold mb-1" %>
      <%= f.text_field :title, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div>
      <%= f.label :description, "説明", class: "block font-semibold mb-1" %>
      <%= f.text_area :description, rows: 3, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <%= f.label :distance, "距離 (km)", class: "block font-semibold mb-1" %>
        <%= f.number_field :distance, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div>
        <%= f.label :image, "ルートの写真", class: "block font-semibold mb-1" %>
        <%= f.file_field :image, class: "w-full border rounded px-3 py-2" %>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <%= f.label :start_location, "開始地点", class: "block font-semibold mb-1" %>
        <%= f.text_field :start_location, class: "w-full border rounded px-3 py-2" %>
      </div>
      <div>
        <%= f.label :end_location, "終了地点", class: "block font-semibold mb-1" %>
        <%= f.text_field :end_location, class: "w-full border rounded px-3 py-2" %>
      </div>
    </div>

    <%= hidden_field_tag "waypoints", @route.waypoints.to_json, id: "waypointsInput" %>

    <div>
      <div id="map" data-page="edit" class="h-[400px] w-full rounded mb-4"></div>
      <%= f.hidden_field :waypoints, id: "waypoints" %>

      <button id="resetRoute" type="button" class="mt-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded">
        地図をリセット
      </button>
      <button id="undoMarker" type="button" class="mt-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
        ひとつ戻る
      </button>
    </div>

    <div>
      <%= f.submit "更新する", class: "bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded" %>
    </div>
  <% end %>

  <div class="mt-4">
    <%= link_to "一覧に戻る", routes_path, class: "text-blue-600 hover:underline" %>
  </div>
</div>
